# illustrator-ruby

Adobe Illustrator 上でルビを振るためのスクリプトです。

Adobe Illustrator 2022 (26.3.1) で動作確認をしています。

## 使用方法
### ルビの記述
#### グループルビの場合
```
清澄白河[きよすみしらかわ]
```
#### モノルビの場合
```
清[きよ]澄[すみ]白[しら]河[かわ]
```

#### 詳細の指定
揃え位置
```
ルビが(align:naka)中付[なかつ]きになります
```

- size
  - ルビのサイズ
  - 値：数値 + 単位
  - 規定値：親文字の 1/2 サイズ
  - 記述例：`(font(4H)寸法[すんぽう]`

- font
  - ルビのフォント
  - 値：指定するフォントのPostScript名
  - 規定値：ルビを振る親テキストのフォント
  - 記述例：`(font(KozGoPro-H)小塚[こずか]ゴシック`

- sutegana
  - 捨て仮名[^1]への自動変換
  - 値：`true` 変換する, `false` 変換しない
  - 規定値：`false`
  - 記述例：`(sutegana(true)捨[す]て仮名[がな]`

- narrow
  - ルビが親文字に収まらない場合に、水平方向（平体、縦組みでは垂直方向）の縮尺の自動調節
  - 値：`true` 自動調節する, `false` 自動調節しない
  - 既定値：`true`
  - 記述例：`(narrow(false)[標準[デファクト・スタンダード]`

- 寸法の指定には以下の単位を指定できます。
  - pt, cm, mm, Q／H, %, px（1px = 0.75pt）

### スクリプトの実行
- 2つのテキストフレームを用意します。
- リネーム
  - ルビを振る（最終的に残す）テキストを、`finish` を含む名前にリネームします。
  - ルビを指示するテキストを、`base` を含む名前にリネームします。
- 2 つのテキストフレームを選択します。
- Illustrator 上で `dist/ruby.jsx` を実行します。
  - `dist/ruby.jsx` ファイルをワークスペース内にドラッグ・アンド・ドロップすることでスクリプトが実行されます。

### 

## 注意事項
- MIT ライセンスに従う限り、自由に使用・再配布等を行うことができます。
- 本スクリプトは無保証です。本スクリプトの仕様を原因とする一切の損失や損害に関して、一切の責任を負いかねます。

## FAQ
- Q. 動作しない
  - A.
「finish」と「base」の文字列が含まれたテキストフレームを選択していますか？
「base」のテキストが「finish」テキストに対になるよう、上記の「ルビの記述方法」に則って記述されていますか？
- Q. それでも動かない
  - A. バグだと思います。詳細や使用環境等を記述の上、Issues を立てていただけると大変助かります。
- Q. 文字を修正したらルビを追従させたい
  - A. 自動で追随することはないので、ルビを消して再度実行してください。
- Q. OpenType GSUB feature のルビ用字形（ruby）に対応しているか
  - A. 非対応です。親文字とルビで違うフォントを指定することは可能です。
- Q. グループルビが行末・行頭に架かった際、ルビがとんでもない位置に配置されるのですが？
  - A. 仕様です。大抵の場合、手動で分離禁止処理を施せば解決すると思われます。
- Q. グループ化されたテキストフレームに対して上手く動作しない
  - A. グループとして選択するのではなく、テキストフレーム個々を選択してください。
- Q. フォントを指定したのに変わらないのですが
  - A. PostScript名を正確に指定出来ていますか？
例えば ヒラギノ角ゴProN W3 を指定したい場合は `HiraKakuProN-W6` と指定する必要があります。

## Contribution
TypeScript で記述され、Webpack + Babel を用いて 〜〜相当のスクリプトに変更しています[^1]。

### Build
```bash
yarn  # Install dependencies
yarn build  # Build
```

## License
This is published under the MIT License.  
(c) 2022 いなにわうどん.

[^1]: 捨て仮名：とは、を指します
[^2]: Adobe Illustrator が搭載する JavaScript インタプリタは、程度です。